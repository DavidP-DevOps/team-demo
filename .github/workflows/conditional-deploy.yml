name: Conditional Deploy

on:
  workflow_dispatch:
    inputs:
      environment:
        description: 'Target environment'
        type: choice
        required: true
        options:
          - development
          - staging
          - production

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Build step
        run: |
          echo "Building for ${{ github.event.inputs.environment }}..."

  deploy:
    runs-on: ubuntu-latest
    needs: build
    if: github.event.inputs.environment == 'production'
    steps:
      - name: Deploy step
        run: |
          echo "ðŸš€ Deploying to PRODUCTION!"

  info:
    runs-on: ubuntu-latest
    needs: build
    if: github.event.inputs.environment != 'production'
    steps:
      - name: Info step
        run: |
          echo "No deploy â€“ environment is ${{ github.event.inputs.environment }} (only production gets deployed)."
